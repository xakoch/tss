function initPageTransitions(){try{barba.hooks.before(()=>{window.scrollTo({top:0})}),barba.init({sync:!1,debug:!1,timeout:7e3,transitions:[{name:"default",once({next:e}){updateBodyClass(e.html),initScript()},async leave(e){try{e&&e.current&&e.current.container&&(initBarbaNavUpdate(e),await e.current.container.animate([{opacity:1},{opacity:0}],{duration:500,easing:"ease"}).finished,e.current.container.remove())}catch(e){console.error("Error in leave transition:",e)}},async enter({next:t}){try{updateBodyClass(t.html),t.container.style.opacity="0";var e=t.container.animate([{opacity:0},{opacity:1}],{duration:500,easing:"ease"});return e.onfinish=()=>{t.container.style.opacity="1"},e.finished}catch(e){console.error("Error in enter transition:",e),t.container.style.opacity="1"}},async beforeEnter({next:e}){updateBodyClass(e.html),initScript()}}]})}catch(e){console.error("Error in initPageTransitions:",e),initScript()}}function updateBodyClass(e){try{var t;e&&(t=e.match(/<body.+?class="([^"]*)"/i),document.body.setAttribute("class",t?t[1]:""))}catch(e){console.error("Error in updateBodyClass:",e)}}function delay(t=2e3){return new Promise(e=>setTimeout(e,t))}function initScript(){try{initBarbaNavUpdate(),initWindowInnerheight(),initSwiperSlider(),isHomePage()&&initHomePage(),initCalc()}catch(e){console.error("Error in initScript:",e)}}function isHomePage(){try{var e;return document.body.classList.contains("home")||document.body.classList.contains("homepage")||document.body.classList.contains("home-page")?!0:!("/"!==(e=window.location.pathname)&&"/index.html"!==e&&"/index.php"!==e&&!e.endsWith("/")&&""!==e&&!document.querySelector(".slider-block")&&!document.querySelector(".custom-count-number"))}catch(e){return console.error("Error in isHomePage:",e),!1}}function initBarbaNavUpdate(e){try{if(e&&e.next&&e.next.html){const t=$(e.next.html).find("[data-barba-update]");0<t.length&&$("[data-barba-update]").each(function(e){0<$(t[e]).length&&(e=$(t[e]).attr("data-link-status"),$(this).attr("data-link-status",e))})}}catch(e){console.error("Error in initBarbaNavUpdate:",e)}}function initWindowInnerheight(){try{$(document).ready(()=>{var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",e+"px")});var e=document.querySelectorAll('a[href^="#"]:not([href="#"])');0<e.length&&e.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var e=this.getAttribute("href"),e=document.querySelector(e);e&&(e=e.getBoundingClientRect().top+window.pageYOffset,window.scrollTo({top:e,behavior:"smooth"}))})})}catch(e){console.error("Error in initWindowInnerheight:",e)}}function initSwiperSlider(){try{"undefined"==typeof Swiper?console.warn("Swiper не найден"):(document.querySelector(".typecard__slide")&&new Swiper(".typecard__slide",{slidesPerView:1,loop:!0,speed:800,navigation:{nextEl:".btn-next",prevEl:".btn-prev"},autoplay:{delay:2500,disableOnInteraction:!0}}),document.querySelector(".blog-slider")&&new Swiper(".blog-slider",{slidesPerView:2,loop:!0,spaceBetween:20,navigation:{nextEl:".btn-next",prevEl:".btn-prev"},breakpoints:{1200:{slidesPerView:3}},autoplay:{delay:2500,disableOnInteraction:!0}}))}catch(e){console.error("Error in initSwiperSlider:",e)}}function initHomePage(){try{var e=document.querySelectorAll(".slider-block");0<e.length&&e.forEach(a=>{try{const s=a.querySelector(".slider-track"),l=a.querySelectorAll(".slider-slide");if(!s||0===l.length)return void console.warn("Missing slider elements in block",a);let r=a.querySelector(".slider-control"),t=(r?r.innerHTML="":((r=document.createElement("div")).classList.add("slider-control"),a.prepend(r)),0),n=0,o=0,i=!1,e;const d=n=>{n>=l.length?n=0:n<0&&(n=l.length-1);var e=l[0].offsetWidth;s.style.transform=`translateX(-${n*e}px)`,a.querySelectorAll(".slider-button").forEach((e,t)=>{e.classList.toggle("active",t===n)}),t=n},u=()=>{m(),e=setInterval(()=>{d(t+1)},3500)},m=()=>{e&&(clearInterval(e),e=null)};l.forEach((e,t)=>{var n=document.createElement("button");n.classList.add("slider-button"),n.textContent=t+1,n.addEventListener("click",()=>{d(t),u()}),r.appendChild(n)});var c=r.querySelector(".slider-button");c&&c.classList.add("active"),s.addEventListener("touchstart",e=>{n=e.touches[0].clientX,i=!0,m()}),s.addEventListener("touchmove",e=>{i&&(o=e.touches[0].clientX)}),s.addEventListener("touchend",()=>{var e;i&&(e=n-o,50<Math.abs(e)&&(0<e&&t<l.length-1?d(t+1):e<0&&0<t&&d(t-1)),i=!1,u())}),a.addEventListener("mouseenter",m),a.addEventListener("mouseleave",u),window.addEventListener("resize",()=>{d(t)}),u()}catch(e){console.error("Error in slider block processing:",e)}});const n=document.querySelectorAll(".custom-count-number");if(0<n.length){var t=()=>{n.forEach(t=>{try{var e=(c=(c=t.textContent)&&c.trim().match(/^([\d,]+)(\s*[<%]?)$/))?{number:parseInt(c[1].replace(/,/g,""),10),suffix:c[2]||""}:null;if(e){var{number:n,suffix:r}=e;if(t.getBoundingClientRect().top<.75*window.innerHeight&&!t.dataset.animated){t.dataset.animated="true";{var o=t,i=n,a=r;let e=0;const s=i/60,l=(o.style.opacity="1",setInterval(()=>{(e+=s)>=i&&(e=i,clearInterval(l)),o.textContent=""+Math.floor(e).toLocaleString("en-US")+a},1e3/30))}}}}catch(e){console.error("Error in number animation:",e)}var c})};t(),window.addEventListener("scroll",t)}const r=document.querySelectorAll(".typecard__tab"),o=document.querySelectorAll(".typecard__content");0<r.length&&0<o.length&&r.forEach(e=>{e.addEventListener("click",function(){try{r.forEach(e=>e.classList.remove("typecard__tab_active")),this.classList.add("typecard__tab_active");var e,t=this.getAttribute("data-tab");t&&(o.forEach(e=>e.classList.remove("typecard__content_active")),e="debit"===t?document.getElementById("debit-content"):document.getElementById("credit-content"))&&e.classList.add("typecard__content_active")}catch(e){console.error("Error in tab click handling:",e)}})})}catch(e){console.error("Error in initHomePage:",e)}}function initCalc(){try{const i=document.getElementById("fleet-slider"),a=document.getElementById("fleet-value"),c=document.getElementById("fleet-tooltip"),s=document.getElementById("gallons-slider"),l=document.getElementById("gallons-value"),d=document.getElementById("gallons-tooltip"),u=document.getElementById("savings-amount"),m=document.querySelectorAll(".button-group__button");if(i&&s&&u){let t=1,n=1,r=50;function o(){var e=.5*r*t*n,e=Number.isInteger(e)?e:e.toFixed(1);u.textContent=""+e}function e(e,t){var n,r,o;e&&t&&(n=parseInt(e.min),r=parseInt(e.max),o=parseInt(e.value),e=e.offsetWidth-60,t.style.left=(o-n)/(r-n)*100/100*e+30+"px")}i&&a&&c&&i.addEventListener("input",function(){t=parseInt(this.value),a.textContent=t,c.textContent=t,e(i,c),o()}),s&&l&&d&&s.addEventListener("input",function(){r=parseInt(this.value),l.textContent=r,d.textContent=r,e(s,d),o()}),0<m.length&&m.forEach(e=>{e.addEventListener("click",function(){m.forEach(e=>e.classList.remove("button-group__button--active")),this.classList.add("button-group__button--active"),n=parseInt(this.dataset.value)||1,o()})}),window.addEventListener("load",function(){e(i,c),e(s,d)}),o()}}catch(e){console.error("Error in initCalc:",e)}}document.addEventListener("DOMContentLoaded",function(){("undefined"!=typeof barba?initPageTransitions:(console.warn("Barba.js не найден"),initScript))()});